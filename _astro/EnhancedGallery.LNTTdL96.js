import{R as E,r as m}from"./index.DtoOFyvK.js";/* empty css                         */var R={exports:{}},N={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F;function te(){if(F)return N;F=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(o,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var u in s)u!=="key"&&(l[u]=s[u])}else l=s;return s=l.ref,{$$typeof:n,type:o,key:c,ref:s!==void 0?s:null,props:l}}return N.Fragment=r,N.jsx=a,N.jsxs=a,N}var J;function ne(){return J||(J=1,R.exports=te()),R.exports}var t=ne();const _=n=>{let r;const a=new Set,o=(g,j)=>{const b=typeof g=="function"?g(r):g;if(!Object.is(b,r)){const w=r;r=j??(typeof b!="object"||b===null)?b:Object.assign({},r,b),a.forEach(h=>h(r,w))}},s=()=>r,u={setState:o,getState:s,getInitialState:()=>p,subscribe:g=>(a.add(g),()=>a.delete(g))},p=r=n(o,s,u);return u},se=n=>n?_(n):_,ae=n=>n;function re(n,r=ae){const a=E.useSyncExternalStore(n.subscribe,E.useCallback(()=>r(n.getState()),[n,r]),E.useCallback(()=>r(n.getInitialState()),[n,r]));return E.useDebugValue(a),a}const A=n=>{const r=se(n),a=o=>re(r,o);return Object.assign(a,r),a},oe=n=>n?A(n):A,le={scale:1,translateX:0,translateY:0},ce=n=>({scale:n.zoom,translateX:n.panX,translateY:n.panY}),P=()=>{if(typeof window>"u")return{};try{const n=localStorage.getItem("gallery-domain-settings");if(n)return JSON.parse(n);const r=localStorage.getItem("gallery-zoom-settings");if(r){const a=JSON.parse(r),o={};return Object.keys(a).length>0&&(o["sox-platform"]={},Object.entries(a).forEach(([s,l])=>{o["sox-platform"][s]=ce(l)}),localStorage.setItem("gallery-domain-settings",JSON.stringify(o)),localStorage.removeItem("gallery-zoom-settings"),console.log("Migrated legacy gallery settings to multi-domain format")),o}return{}}catch(n){return console.warn("Failed to load gallery settings from localStorage:",n),{}}},k=n=>{if(!(typeof window>"u"))try{localStorage.setItem("gallery-domain-settings",JSON.stringify(n))}catch(r){console.warn("Failed to save gallery settings to localStorage:",r)}},ie=oe((n,r)=>({domainSettings:P(),setImageTransform:(a,o,s)=>{const l={...r().domainSettings,[a]:{...r().domainSettings[a],[o]:{...s}}};n({domainSettings:l}),k(l)},getImageTransform:(a,o)=>r().domainSettings[a]?.[o]||{...le},clearImageSettings:(a,o)=>{const s=r().domainSettings;if(!s[a])return;const l={...s[a]};delete l[o];const c={...s,[a]:l};Object.keys(l).length===0&&delete c[a],n({domainSettings:c}),k(c)},clearDomainSettings:a=>{const o={...r().domainSettings};delete o[a],n({domainSettings:o}),k(o)},clearAllSettings:()=>{n({domainSettings:{}}),k({})},migrateLegacySettings:()=>{const a=P();n({domainSettings:a}),k(a)},getStats:()=>{const a=r().domainSettings;return{domains:Object.keys(a).length,totalImages:Object.values(a).reduce((o,s)=>o+Object.keys(s).length,0)}}}));function ge({svgGallery:n,domain:r="default"}){const[a,o]=m.useState(!1),[s,l]=m.useState(null),[c,u]=m.useState(0),[p,g]=m.useState(!1),[j,b]=m.useState({x:0,y:0}),[w,h]=m.useState(!0),[$,y]=m.useState(!1),O=m.useRef(null),{getImageTransform:q,setImageTransform:V}=ie(),f=()=>s?q(r,s.path):{scale:1,translateX:0,translateY:0},x=e=>{s&&V(r,s.path,e)},S=f(),Y=(e,d)=>{l(e),u(d),o(!0),h(!0),y(!1),document.body.style.overflow="hidden"},C=()=>{o(!1),l(null),document.body.style.overflow=""},D=()=>{if(c<n.length-1){const e=c+1;u(e),l(n[e]),h(!0),y(!1)}},X=()=>{if(c>0){const e=c-1;u(e),l(n[e]),h(!0),y(!1)}},I=m.useCallback(e=>{if(!a||!s)return;e.preventDefault();const d=O.current;if(!d)return;const i=d.getBoundingClientRect(),H=e.clientX-i.left,Q=e.clientY-i.top,v=f(),G=e.deltaY>0?.9:1.1,M=Math.max(.1,Math.min(20,v.scale*G)),z=M-v.scale,K=v.translateX-(H-i.width/2)*z/v.scale,ee=v.translateY-(Q-i.height/2)*z/v.scale;x({scale:M,translateX:K,translateY:ee})},[a,s,r]),Z=m.useCallback(e=>{const d=f();d.scale<=1||(e.preventDefault(),g(!0),b({x:e.clientX-d.translateX,y:e.clientY-d.translateY}))},[s,r]),T=m.useCallback(e=>{if(!p||!s)return;e.preventDefault();const i={...f(),translateX:e.clientX-j.x,translateY:e.clientY-j.y};x(i)},[p,j,s,r]),L=m.useCallback(()=>{g(!1)},[]);m.useEffect(()=>(a&&(document.addEventListener("wheel",I,{passive:!1}),document.addEventListener("mousemove",T),document.addEventListener("mouseup",L)),()=>{document.removeEventListener("wheel",I),document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",L)}),[a,I,T,L]),m.useEffect(()=>{const e=d=>{if(a)switch(d.key){case"Escape":C();break;case"ArrowLeft":X();break;case"ArrowRight":D();break;case"+":case"=":if(s){const i=f();x({...i,scale:Math.min(20,i.scale*1.2)})}break;case"-":if(s){const i=f();x({...i,scale:Math.max(.1,i.scale*.8)})}break;case"0":s&&x({scale:1,translateX:0,translateY:0});break}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,c]);const B=()=>{if(s){const e=f();x({...e,scale:Math.min(20,e.scale*1.2)})}},U=()=>{if(s){const e=f();x({...e,scale:Math.max(.1,e.scale*.8)})}},W=()=>{s&&x({scale:1,translateX:0,translateY:0})};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"enhanced-gallery-grid",children:n.map((e,d)=>t.jsxs("div",{className:"enhanced-gallery-item card",children:[t.jsxs("div",{className:"gallery-header",children:[t.jsx("h3",{className:"text-h3",children:e.name}),t.jsxs("div",{className:"gallery-actions",children:[t.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>Y(e,d),title:"View in lightbox with zoom",children:"ðŸ” View"}),t.jsx("a",{href:e.path,target:"_blank",className:"btn btn-secondary btn-sm",title:"Open in new tab",children:"ðŸ”— Open"}),t.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{const i=document.createElement("a");i.href=e.path,i.download=e.filename,document.body.appendChild(i),i.click(),document.body.removeChild(i)},title:"Download SVG",children:"ðŸ’¾ Download"})]})]}),t.jsx("div",{className:"svg-container",onClick:()=>Y(e,d),style:{cursor:"pointer"},title:"Click to view in lightbox",children:t.jsx("img",{src:e.path,alt:e.name,className:"svg-image",loading:"lazy"})}),t.jsx("div",{className:"gallery-footer",children:t.jsx("div",{className:"gallery-meta",children:t.jsxs("span",{className:"meta-item",children:[t.jsx("span",{className:"meta-label",children:"File:"}),t.jsx("code",{className:"meta-value",children:e.filename})]})})})]},e.id))}),a&&s&&t.jsx("div",{className:"lightbox-overlay",onClick:C,children:t.jsxs("div",{className:"lightbox-container",onClick:e=>e.stopPropagation(),children:[n.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"lightbox-nav lightbox-nav-prev",onClick:X,disabled:c===0,title:"Previous image (â†)",children:"â†"}),t.jsx("button",{className:"lightbox-nav lightbox-nav-next",onClick:D,disabled:c===n.length-1,title:"Next image (â†’)",children:"â†’"})]}),t.jsxs("div",{className:"lightbox-header",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"lightbox-title",children:s.name}),t.jsxs("span",{className:"lightbox-counter",children:[c+1," of ",n.length]})]}),t.jsx("button",{className:"lightbox-close",onClick:C,children:"âœ•"})]}),t.jsxs("div",{className:"lightbox-controls",children:[t.jsx("button",{onClick:U,title:"Zoom Out (-)",children:"ðŸ”âˆ’"}),t.jsx("button",{onClick:B,title:"Zoom In (+)",children:"ðŸ”+"}),t.jsx("button",{onClick:W,title:"Reset Zoom (0)",children:"âŒ‚"}),t.jsxs("span",{className:"zoom-level",children:[Math.round(S.scale*100),"%"]})]}),t.jsxs("div",{className:"lightbox-image-container",ref:O,onMouseDown:Z,style:{cursor:S.scale>1?p?"grabbing":"grab":"default"},children:[w&&t.jsxs("div",{className:"lightbox-loading",children:[t.jsx("div",{className:"loading-spinner"}),t.jsxs("p",{children:["Loading ",s.name,"..."]})]}),$&&!w&&t.jsxs("div",{className:"lightbox-error",children:[t.jsx("p",{children:"âŒ Failed to load image"}),t.jsxs("p",{className:"error-filename",children:["File: ",s.filename]})]}),t.jsx("div",{className:"lightbox-image-wrapper",style:{transform:`scale(${S.scale}) translate(${S.translateX/S.scale}px, ${S.translateY/S.scale}px)`,transition:p?"none":"transform 0.2s ease-out"},children:t.jsx("img",{src:s.path,alt:s.name,className:"lightbox-image",onLoad:()=>h(!1),onError:()=>{h(!1),y(!0)},draggable:!1},s.path)})]}),t.jsx("div",{className:"lightbox-instructions",children:t.jsx("p",{children:"ðŸ–±ï¸ Scroll to zoom â€¢ ðŸ–±ï¸ Drag to pan â€¢ âŒ¨ï¸ â†/â†’ to navigate â€¢ âŒ¨ï¸ +/- to zoom â€¢ âŒ¨ï¸ 0 to reset â€¢ âŒ¨ï¸ ESC to close"})}),n.length>1&&t.jsx("div",{className:"lightbox-thumbnails",children:n.map((e,d)=>t.jsx("button",{className:`thumbnail-btn ${d===c?"active":""}`,onClick:()=>{u(d),l(e),h(!0),y(!1)},title:e.name,children:t.jsx("img",{src:e.path,alt:e.name,className:"thumbnail-img"})},e.id))})]})})]})}export{ge as default};
