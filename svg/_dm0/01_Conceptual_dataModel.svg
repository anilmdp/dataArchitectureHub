<svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="userGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#45a049;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="stagingGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#FF9800;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F57C00;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="productionGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#2196F3;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1976D2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="auditGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#9C27B0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7B1FA2;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="3" flood-color="#00000030"/>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="900" fill="#f8f9fa"/>

  <!-- Header -->
  <rect x="0" y="0" width="1400" height="60" fill="#2c3e50"/>
  <text x="700" y="35" text-anchor="middle" fill="white" font-size="20" font-weight="bold" font-family="Arial">Excel Import Architecture with Multi-Level Approval  &amp; Audit Trail</text>

  <!-- User Upload Layer -->
  <rect x="50" y="100" width="1300" height="120" rx="8" fill="url(#userGrad)" filter="url(#shadow)"/>
  <text x="700" y="130" text-anchor="middle" fill="white" font-size="16" font-weight="bold" font-family="Arial">USER UPLOAD LAYER</text>
  
  <!-- Multiple Users -->
  <rect x="80" y="150" width="150" height="60" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="155" y="175" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">User A</text>
  <text x="155" y="190" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">T01_Organization.xlsx</text>
  <text x="155" y="202" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">+ custom columns</text>

  <rect x="280" y="150" width="150" height="60" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="355" y="175" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">User B</text>
  <text x="355" y="190" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">T01_Organization.xlsx</text>
  <text x="355" y="202" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">+ custom columns</text>

  <rect x="480" y="150" width="150" height="60" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="555" y="175" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">User C</text>
  <text x="555" y="190" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">T02_BusinessUnit.xlsx</text>
  <text x="555" y="202" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">+ custom columns</text>

  <!-- Conflict Indicator -->
  <circle cx="315" cy="140" r="15" fill="#F44336"/>
  <text x="315" y="145" text-anchor="middle" fill="white" font-size="12" font-weight="bold" font-family="Arial">!</text>
  <text x="315" y="125" text-anchor="middle" fill="#F44336" font-size="10" font-weight="bold" font-family="Arial">CONFLICT</text>

  <!-- Staging Layer -->
  <rect x="50" y="270" width="1300" height="180" rx="8" fill="url(#stagingGrad)" filter="url(#shadow)"/>
  <text x="700" y="300" text-anchor="middle" fill="white" font-size="16" font-weight="bold" font-family="Arial">STAGING  &amp; CONFLICT RESOLUTION LAYER</text>

  <!-- Import Sessions -->
  <rect x="80" y="320" width="200" height="120" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="180" y="340" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">T50_ImportSession</text>
  <text x="90" y="360" fill="#333" font-size="10" font-family="Arial">• session_id</text>
  <text x="90" y="375" fill="#333" font-size="10" font-family="Arial">• uploaded_by</text>
  <text x="90" y="390" fill="#333" font-size="10" font-family="Arial">• file_name</text>
  <text x="90" y="405" fill="#333" font-size="10" font-family="Arial">• upload_timestamp</text>
  <text x="90" y="420" fill="#333" font-size="10" font-family="Arial">• approval_status</text>
  <text x="90" y="435" fill="#333" font-size="10" font-family="Arial">• approved_by</text>

  <!-- Staging Records -->
  <rect x="320" y="320" width="200" height="120" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="420" y="340" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">T51_StagingRecord</text>
  <text x="330" y="360" fill="#333" font-size="10" font-family="Arial">• staging_id</text>
  <text x="330" y="375" fill="#333" font-size="10" font-family="Arial">• session_id (FK)</text>
  <text x="330" y="390" fill="#333" font-size="10" font-family="Arial">• target_table</text>
  <text x="330" y="405" fill="#333" font-size="10" font-family="Arial">• record_data (JSON)</text>
  <text x="330" y="420" fill="#333" font-size="10" font-family="Arial">• conflict_flag</text>
  <text x="330" y="435" fill="#333" font-size="10" font-family="Arial">• approved_by</text>

  <!-- Data Conflicts -->
  <rect x="560" y="320" width="200" height="120" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="660" y="340" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">T52_DataConflict</text>
  <text x="570" y="360" fill="#333" font-size="10" font-family="Arial">• conflict_id</text>
  <text x="570" y="375" fill="#333" font-size="10" font-family="Arial">• field_name</text>
  <text x="570" y="390" fill="#333" font-size="10" font-family="Arial">• existing_value</text>
  <text x="570" y="405" fill="#333" font-size="10" font-family="Arial">• proposed_value</text>
  <text x="570" y="420" fill="#333" font-size="10" font-family="Arial">• resolved_by</text>
  <text x="570" y="435" fill="#333" font-size="10" font-family="Arial">• resolution_choice</text>

  <!-- Approval Workflow -->
  <rect x="800" y="320" width="220" height="120" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="910" y="340" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">APPROVAL LEVELS</text>
  <rect x="810" y="350" width="60" height="25" rx="3" fill="#E3F2FD" stroke="#2196F3" stroke-width="1"/>
  <text x="840" y="365" text-anchor="middle" fill="#2196F3" font-size="10" font-weight="bold" font-family="Arial">ENTITY</text>
  <rect x="880" y="350" width="60" height="25" rx="3" fill="#E8F5E9" stroke="#4CAF50" stroke-width="1"/>
  <text x="910" y="365" text-anchor="middle" fill="#4CAF50" font-size="10" font-weight="bold" font-family="Arial">RECORD</text>
  <rect x="950" y="350" width="60" height="25" rx="3" fill="#FFF3E0" stroke="#FF9800" stroke-width="1"/>
  <text x="980" y="365" text-anchor="middle" fill="#FF9800" font-size="10" font-weight="bold" font-family="Arial">FIELD</text>
  
  <text x="810" y="395" fill="#333" font-size="10" font-family="Arial">✓ Bulk approve spreadsheet</text>
  <text x="810" y="410" fill="#333" font-size="10" font-family="Arial">✓ Row-by-row approval</text>
  <text x="810" y="425" fill="#333" font-size="10" font-family="Arial">✓ Field-level cherry picking</text>

  <!-- Review Interface -->
  <rect x="1060" y="320" width="250" height="120" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="1185" y="340" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">REVIEW INTERFACE</text>
  <text x="1070" y="360" fill="#333" font-size="10" font-family="Arial">• Side-by-side diff view</text>
  <text x="1070" y="375" fill="#333" font-size="10" font-family="Arial">• Comment threads</text>
  <text x="1070" y="390" fill="#333" font-size="10" font-family="Arial">• Bulk action buttons</text>
  <text x="1070" y="405" fill="#333" font-size="10" font-family="Arial">• Rollback capability</text>
  <text x="1070" y="420" fill="#333" font-size="10" font-family="Arial">• Validation rules</text>
  <text x="1070" y="435" fill="#333" font-size="10" font-family="Arial">• Username tracking</text>

  <!-- Production Layer -->
  <rect x="50" y="500" width="1300" height="120" rx="8" fill="url(#productionGrad)" filter="url(#shadow)"/>
  <text x="700" y="530" text-anchor="middle" fill="white" font-size="16" font-weight="bold" font-family="Arial">PRODUCTION DATABASE LAYER</text>

  <!-- Production Tables -->
  <rect x="100" y="550" width="140" height="60" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="170" y="575" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">T01_Organization</text>
  <text x="170" y="590" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">Production Data</text>
  <text x="170" y="602" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">✓ Approved</text>

  <rect x="270" y="550" width="140" height="60" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="340" y="575" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">T02_BusinessUnit</text>
  <text x="340" y="590" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">Production Data</text>
  <text x="340" y="602" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">✓ Approved</text>

  <rect x="440" y="550" width="140" height="60" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="510" y="575" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">T06_Process</text>
  <text x="510" y="590" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">Production Data</text>
  <text x="510" y="602" text-anchor="middle" fill="#333" font-size="10" font-family="Arial">✓ Approved</text>

  <!-- Audit Trail Layer -->
  <rect x="50" y="670" width="1300" height="120" rx="8" fill="url(#auditGrad)" filter="url(#shadow)"/>
  <text x="700" y="700" text-anchor="middle" fill="white" font-size="16" font-weight="bold" font-family="Arial">COMPREHENSIVE AUDIT TRAIL LAYER</text>

  <!-- Audit Components -->
  <rect x="100" y="720" width="180" height="60" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="190" y="740" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">T47_AuditTrail</text>
  <text x="110" y="755" fill="#333" font-size="10" font-family="Arial">• Every data change</text>
  <text x="110" y="768" fill="#333" font-size="10" font-family="Arial">• User attribution</text>

  <rect x="320" y="720" width="180" height="60" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="410" y="740" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">Import Lineage</text>
  <text x="330" y="755" fill="#333" font-size="10" font-family="Arial">• Source file tracking</text>
  <text x="330" y="768" fill="#333" font-size="10" font-family="Arial">• Approval chain</text>

  <rect x="540" y="720" width="180" height="60" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="630" y="740" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">Conflict Resolution</text>
  <text x="550" y="755" fill="#333" font-size="10" font-family="Arial">• Decision rationale</text>
  <text x="550" y="768" fill="#333" font-size="10" font-family="Arial">• Reviewer comments</text>

  <rect x="760" y="720" width="180" height="60" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="850" y="740" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">T48_DigitalSignature</text>
  <text x="770" y="755" fill="#333" font-size="10" font-family="Arial">• Approval signatures</text>
  <text x="770" y="768" fill="#333" font-size="10" font-family="Arial">• Integrity verification</text>

  <rect x="980" y="720" width="180" height="60" rx="5" fill="rgba(255,255,255,0.9)" stroke="#333" stroke-width="1"/>
  <text x="1070" y="740" text-anchor="middle" fill="#333" font-size="12" font-weight="bold" font-family="Arial">Version Control</text>
  <text x="990" y="755" fill="#333" font-size="10" font-family="Arial">• State snapshots</text>
  <text x="990" y="768" fill="#333" font-size="10" font-family="Arial">• Rollback points</text>

  <!-- Arrows showing flow -->
  <line x1="155" y1="220" x2="155" y2="270" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="355" y1="220" x2="355" y2="270" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="555" y1="220" x2="555" y2="270" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <line x1="180" y1="450" x2="170" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="420" y1="450" x2="340" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="660" y1="450" x2="510" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <line x1="700" y1="620" x2="700" y2="670" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Process Labels -->
  <text x="60" y="245" fill="#333" font-size="12" font-weight="bold" font-family="Arial">UPLOAD</text>
  <text x="60" y="475" fill="#333" font-size="12" font-weight="bold" font-family="Arial">APPROVE</text>
  <text x="60" y="645" fill="#333" font-size="12" font-weight="bold" font-family="Arial">PROMOTE</text>
  <text x="60" y="815" fill="#333" font-size="12" font-weight="bold" font-family="Arial">AUDIT</text>

</svg>
