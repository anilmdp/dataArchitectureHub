<svg viewBox="0 0 1200 1600" xmlns="http://www.w3.org/2000/svg">
  <!-- Header -->
  <rect width="1200" height="120" fill="#1e40af"/>
  <text x="600" y="50" text-anchor="middle" font-size="32" font-weight="bold" fill="white" font-family="Roboto, sans-serif">
    Toronto Data Explorer - Unified Data Model
  </text>
  <text x="600" y="80" text-anchor="middle" font-size="16" fill="#e0f2fe" font-family="Roboto, sans-serif">
    Explore Dimensions Route - Data Architecture and Relationships
  </text>

  <!-- Section 1: Current Data Sources -->
  <rect x="50" y="150" width="1100" height="320" fill="#f0f9ff" stroke="#0891b2" stroke-width="2" rx="10"/>
  <text x="70" y="190" font-size="24" font-weight="bold" fill="#0369a1" font-family="Roboto, sans-serif">1. Current Data Sources</text>
  
  <!-- datasets.csv -->
  <rect x="80" y="210" width="250" height="220" fill="#ffffff" stroke="#0891b2" stroke-width="1" rx="5"/>
  <rect x="80" y="210" width="250" height="40" fill="#e0f2fe" rx="5"/>
  <text x="205" y="235" text-anchor="middle" font-size="16" font-weight="bold" fill="#0369a1" font-family="Roboto, sans-serif">datasets.csv</text>
  <text x="90" y="265" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• id (UUID)</text>
  <text x="90" y="285" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• title</text>
  <text x="90" y="305" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• division</text>
  <text x="90" y="325" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• primary_category</text>
  <text x="90" y="345" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• all_formats</text>
  <text x="90" y="365" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• resources_count</text>
  <text x="90" y="385" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• has_api</text>
  <text x="90" y="405" font-size="10" fill="#92400e" font-family="Roboto, sans-serif">1000+ datasets</text>

  <!-- dimensions.csv -->
  <rect x="360" y="210" width="250" height="220" fill="#ffffff" stroke="#10b981" stroke-width="1" rx="5"/>
  <rect x="360" y="210" width="250" height="40" fill="#d1fae5" rx="5"/>
  <text x="485" y="235" text-anchor="middle" font-size="16" font-weight="bold" fill="#047857" font-family="Roboto, sans-serif">dimensions.csv</text>
  <text x="370" y="265" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• type (division/category)</text>
  <text x="370" y="285" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• name</text>
  <text x="370" y="305" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• group</text>
  <text x="370" y="325" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• dataset_count</text>
  <text x="370" y="365" font-size="10" fill="#92400e" font-family="Roboto, sans-serif">46 divisions + categories</text>

  <!-- Toronto Open Data API -->
  <rect x="640" y="210" width="250" height="220" fill="#ffffff" stroke="#a855f7" stroke-width="1" rx="5"/>
  <rect x="640" y="210" width="250" height="40" fill="#f3e8ff" rx="5"/>
  <text x="765" y="235" text-anchor="middle" font-size="16" font-weight="bold" fill="#7c3aed" font-family="Roboto, sans-serif">Toronto API</text>
  <text x="650" y="265" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• Real-time data</text>
  <text x="650" y="285" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• Download URLs</text>
  <text x="650" y="305" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• File metadata</text>
  <text x="650" y="325" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• Resource details</text>
  <text x="650" y="345" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• Format info</text>
  <text x="650" y="365" font-size="10" fill="#92400e" font-family="Roboto, sans-serif">Live API endpoint</text>

  <!-- Generated Files -->
  <rect x="920" y="210" width="200" height="220" fill="#ffffff" stroke="#f59e0b" stroke-width="1" rx="5"/>
  <rect x="920" y="210" width="200" height="40" fill="#fed7aa" rx="5"/>
  <text x="1020" y="235" text-anchor="middle" font-size="16" font-weight="bold" fill="#92400e" font-family="Roboto, sans-serif">Other Sources</text>
  <text x="930" y="265" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• Tree data</text>
  <text x="930" y="285" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• Measure data</text>
  <text x="930" y="305" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• Key metrics</text>

  <!-- Section 2: Proposed Unified Data Model -->
  <rect x="50" y="500" width="1100" height="420" fill="#ecfdf5" stroke="#10b981" stroke-width="2" rx="10"/>
  <text x="70" y="540" font-size="24" font-weight="bold" fill="#047857" font-family="Roboto, sans-serif">2. Proposed Unified Data Model: unified_dimensions.csv</text>
  
  <!-- Core Fields -->
  <rect x="80" y="560" width="320" height="180" fill="#ffffff" stroke="#10b981" stroke-width="1" rx="5"/>
  <rect x="80" y="560" width="320" height="35" fill="#d1fae5" rx="5"/>
  <text x="240" y="585" text-anchor="middle" font-size="16" font-weight="bold" fill="#047857" font-family="Roboto, sans-serif">Core Dimension Fields</text>
  <text x="90" y="610" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• id (unique identifier)</text>
  <text x="90" y="630" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• name (display name)</text>
  <text x="90" y="650" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• type (division/category)</text>
  <text x="90" y="670" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• group (organizational group)</text>
  <text x="90" y="690" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• parent_id (hierarchy)</text>
  <text x="90" y="710" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• level (tree depth)</text>
  <text x="90" y="730" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• dataset_count</text>

  <!-- Relationship Fields -->
  <rect x="420" y="560" width="320" height="180" fill="#ffffff" stroke="#0891b2" stroke-width="1" rx="5"/>
  <rect x="420" y="560" width="320" height="35" fill="#e0f2fe" rx="5"/>
  <text x="580" y="585" text-anchor="middle" font-size="16" font-weight="bold" fill="#0369a1" font-family="Roboto, sans-serif">Relationship Fields</text>
  <text x="430" y="610" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• related_dimensions (JSON array)</text>
  <text x="430" y="630" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• relationship_strength (1-3)</text>
  <text x="430" y="650" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• cross_links (division-category)</text>
  <text x="430" y="670" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• shared_keywords</text>
  <text x="430" y="690" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• semantic_tags</text>

  <!-- Dataset Integration -->
  <rect x="760" y="560" width="320" height="180" fill="#ffffff" stroke="#a855f7" stroke-width="1" rx="5"/>
  <rect x="760" y="560" width="320" height="35" fill="#f3e8ff" rx="5"/>
  <text x="920" y="585" text-anchor="middle" font-size="16" font-weight="bold" fill="#7c3aed" font-family="Roboto, sans-serif">Dataset Integration</text>
  <text x="770" y="610" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• dataset_ids (JSON array)</text>
  <text x="770" y="630" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• primary_formats</text>
  <text x="770" y="650" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• download_urls (computed)</text>
  <text x="770" y="670" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• api_endpoints</text>
  <text x="770" y="690" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• file_metadata</text>
  <text x="770" y="710" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• last_updated</text>

  <!-- Metadata Fields -->
  <rect x="80" y="760" width="500" height="140" fill="#ffffff" stroke="#f59e0b" stroke-width="1" rx="5"/>
  <rect x="80" y="760" width="500" height="35" fill="#fed7aa" rx="5"/>
  <text x="330" y="785" text-anchor="middle" font-size="16" font-weight="bold" fill="#92400e" font-family="Roboto, sans-serif">UI and Search Fields</text>
  <text x="90" y="810" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• search_keywords (searchable text)</text>
  <text x="90" y="830" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• color_code (hex color for UI)</text>
  <text x="90" y="850" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• icon_emoji (tree node icon)</text>
  <text x="90" y="870" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• description (tooltip text)</text>
  <text x="300" y="810" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• tree_position (x,y coords)</text>
  <text x="300" y="830" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• is_expanded (UI state)</text>
  <text x="300" y="850" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• sort_order (display order)</text>
  <text x="300" y="870" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">• popularity_score (usage)</text>

  <!-- Frontend Benefits -->
  <rect x="600" y="760" width="480" height="140" fill="#ffffff" stroke="#10b981" stroke-width="1" rx="5"/>
  <rect x="600" y="760" width="480" height="35" fill="#d1fae5" rx="5"/>
  <text x="840" y="785" text-anchor="middle" font-size="16" font-weight="bold" fill="#047857" font-family="Roboto, sans-serif">Frontend Benefits</text>
  <text x="610" y="810" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Single data source for all tree operations</text>
  <text x="610" y="830" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Pre-computed relationships and downloads</text>
  <text x="610" y="850" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Instant search without API calls</text>
  <text x="610" y="870" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Optimized for dual-tree rendering</text>

  <!-- Section 3: Data Flow and Generation Process -->
  <rect x="50" y="950" width="1100" height="280" fill="#fef7ff" stroke="#a855f7" stroke-width="2" rx="10"/>
  <text x="70" y="990" font-size="24" font-weight="bold" fill="#7c3aed" font-family="Roboto, sans-serif">3. Data Flow and Generation Process</text>
  
  <!-- Step 1 -->
  <rect x="80" y="1010" width="180" height="120" fill="#ffffff" stroke="#a855f7" stroke-width="1" rx="5"/>
  <rect x="80" y="1010" width="180" height="35" fill="#f3e8ff" rx="5"/>
  <text x="170" y="1035" text-anchor="middle" font-size="14" font-weight="bold" fill="#7c3aed" font-family="Roboto, sans-serif">1. Source Analysis</text>
  <text x="90" y="1055" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Parse dimensions.csv</text>
  <text x="90" y="1075" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Parse datasets.csv</text>
  <text x="90" y="1095" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Query Toronto API</text>
  <text x="90" y="1115" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Extract relationships</text>

  <!-- Arrow 1 -->
  <path d="M260,1070 L300,1070" stroke="#64748b" stroke-width="3" fill="none"/>
  <path d="M295,1065 L305,1070 L295,1075" fill="#64748b"/>

  <!-- Step 2 -->
  <rect x="320" y="1010" width="180" height="120" fill="#ffffff" stroke="#a855f7" stroke-width="1" rx="5"/>
  <rect x="320" y="1010" width="180" height="35" fill="#f3e8ff" rx="5"/>
  <text x="410" y="1035" text-anchor="middle" font-size="14" font-weight="bold" fill="#7c3aed" font-family="Roboto, sans-serif">2. Relationship Mapping</text>
  <text x="330" y="1055" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Match divisions-categories</text>
  <text x="330" y="1075" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Calculate strengths</text>
  <text x="330" y="1095" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Group datasets</text>
  <text x="330" y="1115" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Create hierarchies</text>

  <!-- Arrow 2 -->
  <path d="M500,1070 L540,1070" stroke="#64748b" stroke-width="3" fill="none"/>
  <path d="M535,1065 L545,1070 L535,1075" fill="#64748b"/>

  <!-- Step 3 -->
  <rect x="560" y="1010" width="180" height="120" fill="#ffffff" stroke="#a855f7" stroke-width="1" rx="5"/>
  <rect x="560" y="1010" width="180" height="35" fill="#f3e8ff" rx="5"/>
  <text x="650" y="1035" text-anchor="middle" font-size="14" font-weight="bold" fill="#7c3aed" font-family="Roboto, sans-serif">3. Data Enrichment</text>
  <text x="570" y="1055" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Add download URLs</text>
  <text x="570" y="1075" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Generate UI metadata</text>
  <text x="570" y="1095" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Create search index</text>
  <text x="570" y="1115" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Optimize for trees</text>

  <!-- Arrow 3 -->
  <path d="M740,1070 L780,1070" stroke="#64748b" stroke-width="3" fill="none"/>
  <path d="M775,1065 L785,1070 L775,1075" fill="#64748b"/>

  <!-- Step 4 -->
  <rect x="800" y="1010" width="180" height="120" fill="#ffffff" stroke="#10b981" stroke-width="1" rx="5"/>
  <rect x="800" y="1010" width="180" height="35" fill="#d1fae5" rx="5"/>
  <text x="890" y="1035" text-anchor="middle" font-size="14" font-weight="bold" fill="#047857" font-family="Roboto, sans-serif">4. Output Generation</text>
  <text x="810" y="1055" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Write unified CSV</text>
  <text x="810" y="1075" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Validate data integrity</text>
  <text x="810" y="1095" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Generate JSON index</text>
  <text x="810" y="1115" font-size="11" fill="#164e63" font-family="Roboto, sans-serif">• Create documentation</text>

  <!-- Automation Note -->
  <rect x="80" y="1150" width="900" height="60" fill="#fef3c7" stroke="#f59e0b" stroke-width="1" rx="5"/>
  <circle cx="110" cy="1175" r="12" fill="#f59e0b"/>
  <text x="110" y="1181" text-anchor="middle" font-size="16" font-weight="bold" fill="white" font-family="Roboto, sans-serif">!</text>
  <text x="140" y="1165" font-size="14" font-weight="bold" fill="#92400e" font-family="Roboto, sans-serif">Automation Strategy</text>
  <text x="140" y="1185" font-size="12" fill="#92400e" font-family="Roboto, sans-serif">Script runs daily to update unified_dimensions.csv with latest API data and maintain real-time download links</text>
  <text x="140" y="1200" font-size="12" fill="#92400e" font-family="Roboto, sans-serif">Frontend loads single CSV file - no complex joins or API calls needed during user interaction</text>

  <!-- Section 4: Frontend Implementation Benefits -->
  <rect x="50" y="1260" width="1100" height="280" fill="#f8fafc" stroke="#64748b" stroke-width="2" rx="10"/>
  <text x="70" y="1300" font-size="24" font-weight="bold" fill="#334155" font-family="Roboto, sans-serif">4. Frontend Implementation Benefits</text>
  
  <!-- Dual Tree Implementation -->
  <rect x="80" y="1320" width="340" height="200" fill="#ffffff" stroke="#64748b" stroke-width="1" rx="5"/>
  <rect x="80" y="1320" width="340" height="35" fill="#f1f5f9" rx="5"/>
  <text x="250" y="1345" text-anchor="middle" font-size="16" font-weight="bold" fill="#334155" font-family="Roboto, sans-serif">Dual Tree Implementation</text>
  <text x="90" y="1370" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Single data source for both trees</text>
  <text x="90" y="1390" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Pre-computed cross-relationships</text>
  <text x="90" y="1410" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Synchronized highlighting</text>
  <text x="90" y="1430" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Fast tree expansion/collapse</text>
  <text x="90" y="1450" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Real-time file counts</text>
  <text x="90" y="1470" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Instant search and filtering</text>
  <text x="90" y="1490" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ No complex data mapping logic</text>

  <!-- Download Integration -->
  <rect x="440" y="1320" width="340" height="200" fill="#ffffff" stroke="#64748b" stroke-width="1" rx="5"/>
  <rect x="440" y="1320" width="340" height="35" fill="#f1f5f9" rx="5"/>
  <text x="610" y="1345" text-anchor="middle" font-size="16" font-weight="bold" fill="#334155" font-family="Roboto, sans-serif">Download Integration</text>
  <text x="450" y="1370" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Pre-fetched download URLs</text>
  <text x="450" y="1390" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ File metadata readily available</text>
  <text x="450" y="1410" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Format filtering built-in</text>
  <text x="450" y="1430" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Bulk download preparation</text>
  <text x="450" y="1450" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ No runtime API dependencies</text>
  <text x="450" y="1470" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Offline-capable design</text>
  <text x="450" y="1490" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Progressive enhancement</text>

  <!-- Performance Optimization -->
  <rect x="800" y="1320" width="280" height="200" fill="#ffffff" stroke="#64748b" stroke-width="1" rx="5"/>
  <rect x="800" y="1320" width="280" height="35" fill="#f1f5f9" rx="5"/>
  <text x="940" y="1345" text-anchor="middle" font-size="16" font-weight="bold" fill="#334155" font-family="Roboto, sans-serif">Performance</text>
  <text x="810" y="1370" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Single CSV load</text>
  <text x="810" y="1390" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Client-side operations</text>
  <text x="810" y="1410" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Virtual tree rendering</text>
  <text x="810" y="1430" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Lazy file loading</text>
  <text x="810" y="1450" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Cached relationships</text>
  <text x="810" y="1470" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Minimal re-renders</text>
  <text x="810" y="1490" font-size="12" fill="#164e63" font-family="Roboto, sans-serif">✓ Fast search index</text>

  <!-- Footer Summary -->
  <rect x="50" y="1550" width="1100" height="40" fill="#1e40af"/>
  <text x="600" y="1575" text-anchor="middle" font-size="16" font-weight="bold" fill="white" font-family="Roboto, sans-serif">
    Result: Zero frontend complexity - just load unified CSV and render dual trees with instant search and downloads
  </text>
</svg>